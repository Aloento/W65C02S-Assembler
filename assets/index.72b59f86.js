(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var Y,v,ae,P,F,I={},ne=[],me=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function E(e,t){for(var r in t)e[r]=t[r];return e}function oe(e){var t=e.parentNode;t&&t.removeChild(e)}function he(e,t,r){var s,n,a,u={};for(a in t)a=="key"?s=t[a]:a=="ref"?n=t[a]:u[a]=t[a];if(arguments.length>2&&(u.children=arguments.length>3?Y.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)u[a]===void 0&&(u[a]=e.defaultProps[a]);return T(e,u,s,n,null)}function T(e,t,r,s,n){var a={type:e,props:t,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n==null?++ae:n};return n==null&&v.vnode!=null&&v.vnode(a),a}function H(e){return e.children}function U(e,t){this.props=e,this.context=t}function R(e,t){if(t==null)return e.__?R(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?R(e):null}function se(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return se(e)}}function z(e){(!e.__d&&(e.__d=!0)&&P.push(e)&&!C.__r++||F!==v.debounceRendering)&&((F=v.debounceRendering)||setTimeout)(C)}function C(){for(var e;C.__r=P.length;)e=P.sort(function(t,r){return t.__v.__b-r.__v.__b}),P=[],e.some(function(t){var r,s,n,a,u,c;t.__d&&(u=(a=(r=t).__v).__e,(c=r.__P)&&(s=[],(n=E({},a)).__v=a.__v+1,W(c,a,n,r.__n,c.ownerSVGElement!==void 0,a.__h!=null?[u]:null,s,u==null?R(a):u,a.__h),_e(s,a),a.__e!=u&&se(a)))})}function ie(e,t,r,s,n,a,u,c,p,y){var o,b,f,_,m,A,d,w=s&&s.__k||ne,x=w.length;for(r.__k=[],o=0;o<t.length;o++)if((_=r.__k[o]=(_=t[o])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?T(null,_,null,null,_):Array.isArray(_)?T(H,{children:_},null,null,null):_.__b>0?T(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null){if(_.__=r,_.__b=r.__b+1,(f=w[o])===null||f&&_.key==f.key&&_.type===f.type)w[o]=void 0;else for(b=0;b<x;b++){if((f=w[b])&&_.key==f.key&&_.type===f.type){w[b]=void 0;break}f=null}W(e,_,f=f||I,n,a,u,c,p,y),m=_.__e,(b=_.ref)&&f.ref!=b&&(d||(d=[]),f.ref&&d.push(f.ref,null,_),d.push(b,_.__c||m,_)),m!=null?(A==null&&(A=m),typeof _.type=="function"&&_.__k===f.__k?_.__d=p=ue(_,p,e):p=le(e,_,f,w,m,p),typeof r.type=="function"&&(r.__d=p)):p&&f.__e==p&&p.parentNode!=e&&(p=R(f))}for(r.__e=A,o=x;o--;)w[o]!=null&&pe(w[o],w[o]);if(d)for(o=0;o<d.length;o++)ce(d[o],d[++o],d[++o])}function ue(e,t,r){for(var s,n=e.__k,a=0;n&&a<n.length;a++)(s=n[a])&&(s.__=e,t=typeof s.type=="function"?ue(s,t,r):le(r,s,s,n,s.__e,t));return t}function le(e,t,r,s,n,a){var u,c,p;if(t.__d!==void 0)u=t.__d,t.__d=void 0;else if(r==null||n!=a||n.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(n),u=null;else{for(c=a,p=0;(c=c.nextSibling)&&p<s.length;p+=1)if(c==n)break e;e.insertBefore(n,a),u=a}return u!==void 0?u:n.nextSibling}function ve(e,t,r,s,n){var a;for(a in r)a==="children"||a==="key"||a in t||X(e,a,null,r[a],s);for(a in t)n&&typeof t[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||r[a]===t[a]||X(e,a,t[a],r[a],s)}function J(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||me.test(t)?r:r+"px"}function X(e,t,r,s,n){var a;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)r&&t in r||J(e.style,t,"");if(r)for(t in r)s&&r[t]===s[t]||J(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?s||e.addEventListener(t,a?K:G,a):e.removeEventListener(t,a?K:G,a);else if(t!=="dangerouslySetInnerHTML"){if(n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r==null?"":r;break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function G(e){this.l[e.type+!1](v.event?v.event(e):e)}function K(e){this.l[e.type+!0](v.event?v.event(e):e)}function W(e,t,r,s,n,a,u,c,p){var y,o,b,f,_,m,A,d,w,x,g,$,j,D,B,k=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(p=r.__h,c=t.__e=r.__e,t.__h=null,a=[c]),(y=v.__b)&&y(t);try{e:if(typeof k=="function"){if(d=t.props,w=(y=k.contextType)&&s[y.__c],x=y?w?w.props.value:y.__:s,r.__c?A=(o=t.__c=r.__c).__=o.__E:("prototype"in k&&k.prototype.render?t.__c=o=new k(d,x):(t.__c=o=new U(d,x),o.constructor=k,o.render=be),w&&w.sub(o),o.props=d,o.state||(o.state={}),o.context=x,o.__n=s,b=o.__d=!0,o.__h=[],o._sb=[]),o.__s==null&&(o.__s=o.state),k.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=E({},o.__s)),E(o.__s,k.getDerivedStateFromProps(d,o.__s))),f=o.props,_=o.state,b)k.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(k.getDerivedStateFromProps==null&&d!==f&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(d,x),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(d,o.__s,x)===!1||t.__v===r.__v){for(o.props=d,o.state=o.__s,t.__v!==r.__v&&(o.__d=!1),o.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(N){N&&(N.__=t)}),g=0;g<o._sb.length;g++)o.__h.push(o._sb[g]);o._sb=[],o.__h.length&&u.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(d,o.__s,x),o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(f,_,m)})}if(o.context=x,o.props=d,o.__v=t,o.__P=e,$=v.__r,j=0,"prototype"in k&&k.prototype.render){for(o.state=o.__s,o.__d=!1,$&&$(t),y=o.render(o.props,o.state,o.context),D=0;D<o._sb.length;D++)o.__h.push(o._sb[D]);o._sb=[]}else do o.__d=!1,$&&$(t),y=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++j<25);o.state=o.__s,o.getChildContext!=null&&(s=E(E({},s),o.getChildContext())),b||o.getSnapshotBeforeUpdate==null||(m=o.getSnapshotBeforeUpdate(f,_)),B=y!=null&&y.type===H&&y.key==null?y.props.children:y,ie(e,Array.isArray(B)?B:[B],t,r,s,n,a,u,c,p),o.base=t.__e,t.__h=null,o.__h.length&&u.push(o),A&&(o.__E=o.__=null),o.__e=!1}else a==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=ye(r.__e,t,r,s,n,a,u,p);(y=v.diffed)&&y(t)}catch(N){t.__v=null,(p||a!=null)&&(t.__e=c,t.__h=!!p,a[a.indexOf(c)]=null),v.__e(N,t,r)}}function _e(e,t){v.__c&&v.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){v.__e(s,r.__v)}})}function ye(e,t,r,s,n,a,u,c){var p,y,o,b=r.props,f=t.props,_=t.type,m=0;if(_==="svg"&&(n=!0),a!=null){for(;m<a.length;m++)if((p=a[m])&&"setAttribute"in p==!!_&&(_?p.localName===_:p.nodeType===3)){e=p,a[m]=null;break}}if(e==null){if(_===null)return document.createTextNode(f);e=n?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,f.is&&f),a=null,c=!1}if(_===null)b===f||c&&e.data===f||(e.data=f);else{if(a=a&&Y.call(e.childNodes),y=(b=r.props||I).dangerouslySetInnerHTML,o=f.dangerouslySetInnerHTML,!c){if(a!=null)for(b={},m=0;m<e.attributes.length;m++)b[e.attributes[m].name]=e.attributes[m].value;(o||y)&&(o&&(y&&o.__html==y.__html||o.__html===e.innerHTML)||(e.innerHTML=o&&o.__html||""))}if(ve(e,f,b,n,c),o)t.__k=[];else if(m=t.props.children,ie(e,Array.isArray(m)?m:[m],t,r,s,n&&_!=="foreignObject",a,u,a?a[0]:r.__k&&R(r,0),c),a!=null)for(m=a.length;m--;)a[m]!=null&&oe(a[m]);c||("value"in f&&(m=f.value)!==void 0&&(m!==e.value||_==="progress"&&!m||_==="option"&&m!==b.value)&&X(e,"value",m,b.value,!1),"checked"in f&&(m=f.checked)!==void 0&&m!==e.checked&&X(e,"checked",m,b.checked,!1))}return e}function ce(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(s){v.__e(s,r)}}function pe(e,t,r){var s,n;if(v.unmount&&v.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||ce(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){v.__e(a,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(n=0;n<s.length;n++)s[n]&&pe(s[n],t,r||typeof e.type!="function");r||e.__e==null||oe(e.__e),e.__=e.__e=e.__d=void 0}function be(e,t,r){return this.constructor(e,r)}function de(e,t,r){var s,n,a;v.__&&v.__(e,t),n=(s=typeof r=="function")?null:r&&r.__k||t.__k,a=[],W(t,e=(!s&&r||t).__k=he(H,null,[e]),n||I,I,t.ownerSVGElement!==void 0,!s&&r?[r]:n?null:t.firstChild?Y.call(t.childNodes):null,a,!s&&r?r:n?n.__e:t.firstChild,s),_e(a,e)}Y=ne.slice,v={__e:function(e,t,r,s){for(var n,a,u;t=t.__;)if((n=t.__c)&&!n.__)try{if((a=n.constructor)&&a.getDerivedStateFromError!=null&&(n.setState(a.getDerivedStateFromError(e)),u=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,s||{}),u=n.__d),u)return n.__E=n}catch(c){e=c}throw e}},ae=0,U.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof e=="function"&&(e=e(E({},r),this.props)),e&&E(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),z(this))},U.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),z(this))},U.prototype.render=H,P=[],C.__r=0;const we="/assets/preact.48177e6f.svg";var l=(e=>(e.MOV="MOV",e.ADDC="ADDC",e.SUBC="SUBC",e.OR="OR",e.XOR="XOR",e.BZS="BZS",e.BZC="BZC",e.ADC="ADC",e.AND="AND",e.ASL="ASL",e.BBR="BBR",e.BBS="BBS",e.BCC="BCC",e.BCS="BCS",e.BEQ="BEQ",e.BIT="BIT",e.BMI="BMI",e.BNE="BNE",e.BPL="BPL",e.BRA="BRA",e.BRK="BRK",e.BVC="BVC",e.BVS="BVS",e.CLC="CLC",e.CLD="CLD",e.CLI="CLI",e.CLV="CLV",e.CMP="CMP",e.CPX="CPX",e.CPY="CPY",e.DEC="DEC",e.DEX="DEX",e.DEY="DEY",e.EOR="EOR",e.INC="INC",e.INX="INX",e.INY="INY",e.JMP="JMP",e.JSR="JSR",e.LDA="LDA",e.LDX="LDX",e.LDY="LDY",e.LSR="LSR",e.NOP="NOP",e.ORA="ORA",e.PHA="PHA",e.PHP="PHP",e.PHX="PHX",e.PHY="PHY",e.PLA="PLA",e.PLP="PLP",e.PLX="PLX",e.PLY="PLY",e.RMB="RMB",e.ROL="ROL",e.ROR="ROR",e.RTI="RTI",e.RTS="RTS",e.SBC="SBC",e.SEC="SEC",e.SED="SED",e.SEI="SEI",e.SMB="SMB",e.STA="STA",e.STP="STP",e.STX="STX",e.STY="STY",e.STZ="STZ",e.TAX="TAX",e.TAY="TAY",e.TRB="TRB",e.TSB="TSB",e.TSX="TSX",e.TXA="TXA",e.TXS="TXS",e.TYA="TYA",e.WAI="WAI",e))(l||{}),h=(e=>(e.IndexX="X",e.IndexY="Y",e.Accumulator="A",e.StackPointer="SP",e.ProgramCounter="PC",e.StatusRegister="SR",e))(h||{}),S=(e=>(e.Register="Register",e.OpCode="OpCode",e.Number="Number",e.Pointer="Pointer",e.Label="Label",e.LabelDef="LabelDef",e))(S||{});function Q(e){return e===`
`||e==="\r"}function q(e){let t=0;const r=[],s=new Set;for(;t<e.length;){const n=e[t];if(n===" "||n==="	"||n===","||Q(n)){t++;continue}if(n===";"){for(;t<e.length&&!Q(e[t]);)t++;continue}if(/[a-zA-Z_]/.test(n)){let c="",p=t;for(;p<e.length&&/[a-zA-Z0-9_]/.test(e[p]);)c+=e[p],p++;if(e[p]===":"){r.push({type:"LabelDef",value:c}),s.add(c),t=p+1;continue}if(s.has(c)){r.push({type:"Label",value:c}),t=p;continue}}const a=[e.slice(t,t+2),e.slice(t,t+3),e.slice(t,t+4)].map(c=>c.toUpperCase()).find(c=>c in l);if(a){r.push({type:"OpCode",value:l[a]}),t+=a.length;continue}const u=n.toUpperCase();if(Object.values(h).indexOf(u)!==-1){r.push({type:"Register",value:u}),t++;continue}if(n+e[t+1]==="0x"){let c="";for(t+=2;t<e.length&&/[0-9A-F]/.test(e[t]);)c+=e[t],t++;const p=parseInt(c,16);if(p>255)throw new TypeError(`Number value ${p} is too large for 8-bit at ${t}`);r.push({type:"Number",value:p});continue}if(n==="["){let c="";for(t++;t<e.length&&e[t]!=="]";)c+=e[t],t++;const p=parseInt(c,16);if(p>65535)throw new TypeError(`Pointer value ${p} is too large for 16-bit at ${t}`);r.push({type:"Pointer",value:p}),t++;continue}throw new TypeError(`Syntax Error: ${n} at ${t}.

    Recent Tokens: ${r.slice(-5).map(c=>c.value).join(" ")}

    Recent String: ${e.slice(t-10,t+10)}`)}return r}var i=(e=>(e.Program="Program",e.CallExpression="CallExpression",e.RegisterLiteral="RegisterLiteral",e.NumberLiteral="NumberLiteral",e.PointerLiteral="PointerLiteral",e.LabelLiteral="LabelLiteral",e))(i||{});function O(e){let t=0;function r(){let n=e[t];if(n.type===S.Number)return t++,{type:"NumberLiteral",value:n.value};if(n.type===S.Register)return t++,{type:"RegisterLiteral",value:n.value};if(n.type===S.Pointer)return t++,{type:"PointerLiteral",value:n.value};if(n.type===S.Label)return t++,{type:"LabelLiteral",value:n.value};if(n.type===S.LabelDef)return t++,{type:"LabelLiteral",name:n.value};if(n.type===S.OpCode){const a={type:"CallExpression",name:n.value,params:[]};for(n=e[++t];t<e.length&&n.type!==S.OpCode&&n.type!==S.LabelDef;)a.params.push(r()),n=e[t];return a}throw new TypeError(`Unexpected token ${n.type} : ${n.value} at ${t}`)}const s={type:"Program",body:[]};for(;t<e.length;)s.body.push(r());return s}const ee=`
;loading something into a register:
mov a, 0x55
mov a, [ 0x1234 ]
mov x, 0x55
mov x, [ 0x1234 ]
mov y, 0x55
mov y, [ 0x1234 ]
; storing the value from a register into memory:
mov [ 0x1234 ], a
mov [ 0x1234 ], x
mov [ 0x1234 ], y
; moving between registers:
mov a, x
mov x, a
mov a, y
mov y, a
;arithmetic and logic operations, the result always goes to A
addc a, 0x55	; adds two bytes
addc a, [ 0x1234 ]
subc a, 0x55	; substract
subc a, [ 0x1234 ]
and a, 0x55	; biwise and
and a, [ 0x1234 ]
or a, 0x55	; bitwise or
or a, [ 0x1234 ]
xor a, 0x55	; bitwise xor
xor a, [ 0x1234 ]
inc a	; increment (add one)
inc x
inc y
inc [ 0x1234 ]
dec a	; decrement (substract one)
dec x
dec y
dec [ 0x1234 ]
; comparison operations (more explanations in the next class)
cmp a, 0x55
cmp a, [ 0x1234 ]
cmp x, 0x55
cmp x, [ 0x1234 ]
cmp y, 0x55
cmp y, [ 0x1234 ]
; conditional jump. The meaning of the immediate value
; will be explaine in the next class, or you can read the datasheet
bzs 0x55
bzc 0x55
bcs 0x55

start:
jmp start
mov a, 0x11
mov [0x3000], x
mov y, 0x21
inc x
addc a, 0x02
`;function Le(e,t){function r(n,a){n.forEach(u=>s(u,a))}function s(n,a){const u=t[n.type];switch(u&&u(n,a),n.type){case i.Program:r(n.body,n);break;case i.CallExpression:r(n.params,n);break;case i.RegisterLiteral:case i.NumberLiteral:case i.PointerLiteral:case i.LabelLiteral:break;default:throw new TypeError(`Unexpected node type ${n.type}`)}}s(e)}function ke(e,t){switch(e.name){case l.NOP:t.value="EA";break;default:throw new Error(`Not Supported opcode: ${e.name} with no params`)}}function xe(e,t){const r=e.params[0];switch(e.name){case l.JMP:switch(t.value="4C",r.type){case i.LabelLiteral:t.params=[r];break;case i.PointerLiteral:t.params=L(r.value);break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.JMP}`)}break;case l.INC:switch(r.type){case i.RegisterLiteral:switch(r.value){case h.Accumulator:t.value="1A";break;case h.IndexX:t.value="E8";break;case h.IndexY:t.value="C8";break;default:throw new Error(`UnSupport Register: ${r.value} for ${l.INC}`)}break;case i.PointerLiteral:t.value="EE",t.params=L(r.value);break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.INC}`)}break;case l.DEC:switch(r.type){case i.RegisterLiteral:switch(r.value){case h.Accumulator:t.value="3A";break;case h.IndexX:t.value="CA";break;case h.IndexY:t.value="88";break;default:throw new Error(`UnSupport Register: ${r.value} for ${l.DEC}`)}break;case i.PointerLiteral:t.value="CE",t.params=L(r.value);break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.DEC}`)}break;case l.BZS:switch(r.type){case i.NumberLiteral:t.value="F0",t.params=[r];break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.BZS}`)}break;case l.BZC:switch(r.type){case i.NumberLiteral:t.value="D0",t.params=[r];break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.BZC}`)}break;case l.BCS:switch(r.type){case i.NumberLiteral:t.value="B0",t.params=[r];break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.BCS}`)}break;case l.BCC:switch(r.type){case i.NumberLiteral:t.value="90",t.params=[r];break;default:throw new Error(`Unexpected param type: ${r.type} for ${l.BCC}`)}default:throw new Error(`UnSupport OpCode: ${e.name} with 1 param`)}}function Se(e,t,r){switch(e.type){case i.RegisterLiteral:if(t.type===i.RegisterLiteral){e.value===h.Accumulator&&t.value===h.IndexX&&(r.name=l.TXA,r.value="8A"),e.value===h.Accumulator&&t.value===h.IndexY&&(r.name=l.TYA,r.value="98"),e.value===h.IndexX&&t.value===h.Accumulator&&(r.name=l.TAX,r.value="AA"),e.value===h.IndexY&&t.value===h.Accumulator&&(r.name=l.TAY,r.value="A8");break}switch(e.value){case h.Accumulator:switch(r.name=l.LDA,t.type){case i.NumberLiteral:r.value="A9",r.params=[t];break;case i.PointerLiteral:r.value="AD",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.LDA}`)}break;case h.IndexX:switch(r.name=l.LDX,t.type){case i.NumberLiteral:r.value="A2",r.params=[t];break;case i.PointerLiteral:r.value="AE",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.LDX}`)}break;case h.IndexY:switch(r.name=l.LDY,t.type){case i.NumberLiteral:r.value="A0",r.params=[t];break;case i.PointerLiteral:r.value="AC",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.LDY}`)}break;default:throw new Error(`UnSupport Left Register: ${e.value} for ${l.MOV}`)}break;case i.PointerLiteral:switch(t.type){case i.RegisterLiteral:switch(r.params=L(e.value),t.value){case h.Accumulator:r.name=l.STA,r.value="8D";break;case h.IndexX:r.name=l.STX,r.value="8E";break;case h.IndexY:r.name=l.STY,r.value="8C";break;default:throw new Error(`UnSupport Right Register: ${t.value} for ${l.MOV}`)}break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.MOV}`)}break;default:throw new Error(`Unexpected Left param type: ${e.type} for ${l.MOV}`)}}function Ee(e,t){const r=e.params[0],s=e.params[1];switch(e.name){case l.MOV:Se(r,s,t);break;case l.ADDC:case l.ADC:De(t,r,s);break;case l.SUBC:case l.SBC:ge(t,r,s);break;case l.AND:Re(t,r,s);break;case l.OR:case l.ORA:Pe(t,r,s);break;case l.XOR:case l.EOR:$e(t,r,s);break;case l.CMP:Ae(r,s,t);break;default:throw new Error(`UnSupport OpCode: ${e.name} with 2 params`)}}function Ae(e,t,r){switch(e.type){case i.RegisterLiteral:switch(e.value){case h.Accumulator:switch(t.type){case i.NumberLiteral:r.value="C9",r.params=[t];break;case i.PointerLiteral:r.value="CD",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.ADC}`)}break;case h.IndexX:switch(t.type){case i.NumberLiteral:r.value="E0",r.params=[t];break;case i.PointerLiteral:r.value="EC",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.ADC}`)}break;case h.IndexY:switch(t.type){case i.NumberLiteral:r.value="C0",r.params=[t];break;case i.PointerLiteral:r.value="CC",r.params=L(t.value);break;default:throw new Error(`UnSupport Right param type: ${t.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${e.value} for ${r.name}`)}break;default:throw new Error(`Unexpected Left param type: ${e.type} for ${r.name}`)}}function $e(e,t,r){switch(t.type){case i.RegisterLiteral:switch(t.value){case h.Accumulator:switch(r.type){case i.NumberLiteral:e.value="49",e.params=[r];break;case i.PointerLiteral:e.value="4D",e.params=L(r.value);break;default:throw new Error(`UnSupport Right param type: ${r.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${t.value} for ${e.name}`)}break;default:throw new Error(`Unexpected Left param type: ${t.type} for ${e.name}`)}}function Pe(e,t,r){switch(t.type){case i.RegisterLiteral:switch(t.value){case h.Accumulator:switch(r.type){case i.NumberLiteral:e.value="09",e.params=[r];break;case i.PointerLiteral:e.value="0D",e.params=L(r.value);break;default:throw new Error(`UnSupport Right param type: ${r.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${t.value} for ${e.name}`)}break;default:throw new Error(`Unexpected Left param type: ${t.type} for ${e.name}`)}}function Re(e,t,r){switch(t.type){case i.RegisterLiteral:switch(t.value){case h.Accumulator:switch(r.type){case i.NumberLiteral:e.value="29",e.params=[r];break;case i.PointerLiteral:e.value="2D",e.params=L(r.value);break;default:throw new Error(`UnSupport Right param type: ${r.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${t.value} for ${e.name}`)}break;default:throw new Error(`Unexpected Left param type: ${t.type} for ${e.name}`)}}function ge(e,t,r){switch(t.type){case i.RegisterLiteral:switch(t.value){case h.Accumulator:switch(r.type){case i.NumberLiteral:e.value="E9",e.params=[r];break;case i.PointerLiteral:e.value="ED",e.params=L(r.value);break;default:throw new Error(`UnSupport Right param type: ${r.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${t.value} for ${e.name}`)}break;default:throw new Error(`Unexpected Left param type: ${t.type} for ${e.name}`)}}function De(e,t,r){switch(t.type){case i.RegisterLiteral:switch(t.value){case h.Accumulator:switch(r.type){case i.NumberLiteral:e.value="69",e.params=[r];break;case i.PointerLiteral:e.value="6D",e.params=L(r.value);break;default:throw new Error(`UnSupport Right param type: ${r.type} for ${l.ADC}`)}break;default:throw new Error(`UnSupport Left Register: ${t.value} for ${e.name}`)}break;default:throw new Error(`Unexpected Left param type: ${t.type} for ${e.name}`)}}function fe(e){const t=e.toString(16).padStart(4,"0");return[t.slice(2,4),t.slice(0,2)]}function L(e){return fe(e).map(t=>({type:i.NumberLiteral,value:t}))}function te(e){const t={type:i.Program,body:[]};return e.context=t.body,Le(e,{[i.LabelLiteral](r,s){(s==null?void 0:s.type)===i.Program&&t.body.push(r)},[i.CallExpression](r,s){var a,u;const n={type:i.CallExpression,name:r.name,params:[]};switch((a=r.params)==null?void 0:a.length){case 1:xe(r,n);break;case 2:Ee(r,n);break;case 0:case void 0:ke(r,n);break;default:throw new Error(`Params length out of range: ${(u=r.params)==null?void 0:u.length} for opcode: ${r.name}`)}s.context.push(n)}}),t}let V=0;const re=new Map;function M(e){switch(e.type){case i.Program:return e.body.map(M).join(`
`);case i.LabelLiteral:return e.name?(re.set(e.name,V),""):fe(re.get(e.value)).join(" ");case i.CallExpression:return V++,`${e.value} ${e.params.map(M).join(" ")}`;case i.NumberLiteral:return V++,e.value.toString(16).padStart(2,"0");default:throw new Error(`Unknown AST type: ${e.type}`)}}var Be=0;function Z(e,t,r,s,n){var a,u,c={};for(u in t)u=="ref"?a=t[u]:c[u]=t[u];var p={type:e,props:c,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Be,__source:n,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(u in a)c[u]===void 0&&(c[u]=a[u]);return v.vnode&&v.vnode(p),p}function Ne(){window.TestASM=ee,window.Tokenizer=q,window.Parser=O,window.Transformer=te,window.Generator=M;const e=q(ee);console.log(e);const t=O(e);console.log(t);const r=te(t);console.log(r);const s=M(r);return console.log(s),Z("div",{children:Z("img",{src:we})})}de(Z(Ne,{}),document.getElementById("app"));
